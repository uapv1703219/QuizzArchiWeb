<!DOCTYPE html>
<html ng-app="Quizz">
	<head>
		<title>CERIGame</title>

		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">


		<!-- CDN Google -->
 		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular.min.js"></script>
 		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular-route.js"></script>
 		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.8/angular-animate.js"></script>
 		<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>

 		<script src="app/loader.js"></script>

 		<link rel="stylesheet" href="css/myStyle.css" />
 	
	</head>
	<body>
		<div class="container-fluid">
			<div class="row align-items-center bandeau">
				<div class="col-lg-3 offset-md-1 fixed-top" ng-controller="bandeau" >
					<span class="bandeau2 success" ng-show="showNotification">Notification : {{message}} </span>
				</div>
				<div class="col">
					<p class="title text-center mb-0">THE CERIGAME</p>
				</div>
				<div class="col-3" ng-controller="login" ng-init="load(); getHumeur()">
					<div ng-hide="isLogged">
						<form ng-submit="login()" class="form-horizontal" style="margin-top: 1em;">
							<div class="form-group row">
								<label class="col-3 col-form-label" for="username">Pseudo </label>
								<div class="col-sm-7">
									<input type="text" class="form-control" ng-model="username" placeholder="Username" required>
								</div>
							</div>
							<div class="form-group row">
								<label for="mdp" class="col-3 col-form-label">Password </label>
								<div class="col-sm-7">
									<input type="password" class="form-control" ng-model="password" placeholder="Password" required>
								</div>
							</div>			
							<div class="form-group">
								<input class="btn btn-dark mb-1" type="submit" value="Go!">
							</div>
						</form>

					</div>
					<form ng-submit="setHumeur()" class="form-horizontal" style="margin-top: 1em;">
						<div class="form-group row">
							<label class="col-3 col-form-label" for="username">Pseudo: </label>
							<label class="col-sm-6 col-form-label"> {{user}} </label>
						</div>
						<div class="form-group row">
							<label for="mdp" class="col-3 col-form-label">Humeur:</label>
							<div class="col-sm-6">
								<input type="text" class="form-control" ng-model="humeur">
							</div>
							<input class="btn btn-dark mb-1" type="submit" value="Set!">
						</div>
						<div class="form-group row">
							<span class="col-10 annotation">Dernière connexion : {{lastConnexion}}</span>
						</div>		
						<div class="form-group">
							<button class="btn btn-dark mb-1" ng-click="logout()">Logout</button>
						</div>
					</form>
				</div>
			</div>
			<div class="row">
				<div class="col-10" ng-controller="quizz" ng-init="getQuizz()">
					<div class="card-deck ml-4 mt-4 " ng-show="showSelect">
						<div ng-repeat="elem in themes" style="padding-bottom: 2rem">
							<div class="card text-center border-0" style="width: 19rem; height: 290px;">
							  <img ng-click="quizzPrep(elem)" src="images/{{elem}}.jpg" class="rounded-circle img-fluid clickable" alt="{{elem}}">
							  <div class="card-body">
							    <span class="card-text clickable" ng-click="quizzPrep(elem)">{{elem}}</span>
							  </div>
							</div>
						</div>
					</div>

					<div class="row" ng-show="showQuizzPrep">
						<div class="col-10 showQuizz">
							<div class="text-center mt-2 pb-5" style="height: 35%;">
								<h1>{{leTheme}}</h1>
								<h5>Auteur : {{auteur}}</h5>
								<img src="images/{{leTheme}}.jpg" class="rounded img-fluid" style="height: 100%;">
							</div>
							<div class="text-center" style="margin-top: 5%"> <!-- Selection des levels -->
								<button ng-click="setFacile()" class="btn btn-success btn-lg mr-4" style="width: 8rem">Facile</button>
								<button ng-click="setMoyen()" class="btn btn-warning btn-lg" style="width: 8rem">Moyen</button>
								<button ng-click="setDifficile()" class="btn btn-danger btn-lg ml-4" style="width: 8rem">Difficile</button>
								<br>
								<span><b>Multiplicateur : {{mult}}% Nombre de réponses possibles : {{nbRep}}</b></span>
							</div>
							<div class="text-center mt-4">
								<button class="btn btn-success btn-lg mr-4" ng-click="launch()">GO !</button>
								<button class="btn btn-dark btn-lg" ng-click="backHome()">Accueil</button>
							</div>
							
						</div>
					</div>

					<!-- Menu Defi -->
					<div class="col-2" style="background-color: grey">
						<button class="btn btn-dark btn-lg ButtSocial text" style="margin-left: 2em">Menu</button>
						<div class="rounded social text-center">
							<h2>Social</h2>
							<md-list-item class="md-2-line md-no-proxy _md" role="listitem">
			          			<div class="md-list-item-text" ng-repeat="elem in defis">
			            			<h3 class="ng-binding">Blabla</h3>
			            			<hr>
			            			{{elem}}
			          			</div>
		          			</md-list-item>
		        			<div class="md-secondary-container">	
		        			</div>
						</div>
						<div class="rounded social social2 text-center">
							<h2>Défi</h2>
							<div>
								<p>Score</p>
							</div>
						</div>
					</div>
					<!-- -->

					<!-- ng-class="{ 'disabled': showNext}" -->
					<div ng-show="showQuizz">
						<div class="text-center pb-3 showQuizz">
								<h1>{{leTheme}}</h1>
								<h5>Auteur : {{auteur}}</h5>
								<div class="progress">
  									<div class="progress-bar" role="progressbar" style="width: {{progress}};" aria-valuenow="progress" aria-valuemin="0" aria-valuemax="100">{{progress}}</div>
								</div>
								<span>{{cptQuestion}}/{{nbQuestions}}</span>
								<span class="ml-4">Score = {{score}}</span>
								<p>{{laQuestion}}</p>
								<button ng-click="envoieReponse(elem)" class="mr-2"  ng-disabled="showNext" ng-repeat="elem in lesReponses">{{elem}}</button>
								<div ng-show="showNext">
									<p>{{result}}</p>
									<p>{{anecdote}}</p>
									<button ng-click="nextQuestion()">Next</button>
								</div>
								
							</div>
						<button class="btn btn-dark btn-lg" ng-click="backHome()">Accueil</button>
					</div>
					<div ng-show="showResults">
						<div class="text-center pb-5 showQuizz" style="height: 35%;">
							<h1>{{leTheme}}</h1>
							<h5>Auteur : {{auteur}}</h5>

							<span>Bravo, vous avez réaliser ce quizz avec un score de : {{score}}</span><br>
							<span>Vous avez réalisé ce quizz en un temps de {{tempsTotal}}ms</span><br>
							<span>Rejouez pour avoir un meilleur score ! Ou vous pouvez choisir un autre quizz !</span><br>
							<button class="btn btn-dark btn-lg" ng-click="defi()">Degeulasse</button>
							<button class="btn btn-dark btn-lg" ng-click="backHome()">Accueil</button>
						</div>
					</div>

				</div>
				<div class="col-2 text-center" style="background-color: grey" ng-controller="social" ng-init="getHistorique()">
					<button class="btn btn-dark btn-lg ButtSocial text" ng-click="switchView()">{{menu}}</button>
					<div class="rounded social text-center" ng-show="showSocial" ng-init="getSocial()">
						<h2>Social</h2>
						<md-list-item class="md-2-line md-no-proxy _md" role="listitem">
	          				<div class="md-list-item-text" ng-repeat="elem in users">
	            				<h3 class="ng-binding">{{elem.identifiant}}</h3>
	            				<p>{{elem.humeur}}</p>
	            				<span ng-class="{greenDot: elem.statut == '1', greyDot: elem.statut == '0' || elem.statut == null}"></span>
	            				<hr>
	          				</div>
          				</md-list-item>
        				<div class="md-secondary-container">	
        				</div>
					</div>
					<div class="rounded social text-center" ng-show="showHistorique">
						<h2>Historique</h2>
						<div ng-repeat="elem in historique">
							<p>Score: {{elem.score}} | {{elem.temps}}ms</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>

